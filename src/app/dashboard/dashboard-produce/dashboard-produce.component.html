<app-app-top [cursorId]="'cur_dashboard'"></app-app-top>
<div>
  <div class="org_wrap">
    <div class="contain_n">
      <div class="content">
        <div><h2>개방형 플랫폼에서  애플리케이션 개발과 배포, 관리를 시작하세요!</h2></div>
        <div class="org_txt">조직을 생성하세요</div>
        <!-- 조직명 시작-->
        <div class="row two_line two_view ns">
          <ul class="maT30">
            <li>
              <div class="sortable_wrap">
                <div class="sortable_top">
                  <p>조직명</p>
                </div>
                <div class="org_box clearfix">
                  <div>
                    <input class="form-control" type="text" required="" placeholder="생성할 조직명을 입력하세요."
                           [(ngModel)]="orgName" (keyup)="replaceInvalidateString()" (change)="isExistOrgName($event)">
                    <p class="text-left red" id="action-info-message">
                      <i class="fas fa-exclamation-circle exclamation_mark"
                         [style.display]="errorMessage === ''? 'none' : 'inline-block'"></i>
                      {{errorMessage}}
                    </p>
                  </div>
                  <div></div>
                  <div>
                    조직은 컴퓨팅 리소스, 애플리케이션 및 서비스를 포괄하는 개발 계정입니다. <br/>
                    개인이나 다수의 공동 작업자가 소유 하거나 사용 할 수 있습니다. <br/>
                    프로젝트의 이름이나 팀의 이름으로 조직의 조직의 이름을 설정하세요.<br/>
                  </div>
                </div>
              </div>
            </li>
          </ul>
        </div>
        <!-- 조직명 끝 -->
        <!-- 할당량 시작-->
        <div class="row two_line two_view ns">
          <ul class="maT30">
            <li>
              <div class="sortable_wrap">
                <div class="sortable_top">
                  <p>할당량</p>
                </div>
                <div class="organization_table2 maT30 paB40 org_tbl_wrap">
                  <table class="org_tables_noline text-center">
                    <colgroup>
                      <col style=''>
                      <col style=''>
                      <col style=''>
                      <col style=''>
                      <col style=''>
                      <col style=''>
                      <col style=''>
                      <col style=''>
                      <col style=''>
                    </colgroup>
                    <thead>
                    <tr>
                      <td>선택</td>
                      <td>서비스명</td>
                      <td>메모리</td>
                      <td>인스턴트 메모리</td>
                      <td>라우트</td>
                      <td>서비스 인스턴트</td>
                      <td>가격</td>
                      <td>인스턴트</td>
                      <td>인스턴트</td>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let aquota of availableQuotas" class="org_quota"
                        [ngClass]="{'cur': isSelectedQuota(aquota)}">
                      <td>
                        <!-- TODO ngIf isSelectedQuota(aquota) then input radio template else none -->
                        <!--
                        <ng-container *ngIf="!isSelectedQuota(aquota); else selected">
                          <input type="radio" name="radio-quota" [id]="'radio-' + aquota.name"
                                 (click)="changeQuota(aquota)">
                          <label [for]="'radio-' + aquota.name"></label>
                        </ng-container>
                        <ng-template #selected></ng-template>
                        -->
                        <input type="radio" name="radio-quota" [id]="'radio-' + aquota.name"
                               (click)="changeQuota(aquota)">
                        <label [for]="'radio-' + aquota.name"></label>
                      </td>
                      <td quota-key="name">{{aquota.name}}</td>
                      <td quota-key="memory-limit">{{aquota.memoryLimit}}</td>
                      <td quota-key="instance-memory-limit">{{aquota.instanceMemoryLimit}}
                      </td>
                      <td quota-key="routes">{{aquota.totalRoutes}}</td>
                      <td quota-key="service-instance">{{aquota.totalServices}}</td>
                      <td quota-key="price">{{aquota.priceKorean}}</td>
                      <td quota-key="app-instances">{{aquota.applicationInstanceLimit}}</td>
                      <td quota-key="route-ports">{{aquota.totalReservedRoutePorts}}</td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </li>
          </ul>
        </div>
        <!-- 할당량 끝 -->
        <div class="cWrap_btn">
          <button class="btns2 btns2_1 colors4" id="btn_create_org"
          data-target="#create-popup" data-toggle="modal" (click)="createOrg()"
          >조직생성</button>
          <button class="btns2 btns2_1 colors5" (click)="cancelToCreate()">취소</button>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="create-popup" (focusout)="resetToCreate()">
  <div class="vertical-alignment-helper">
    <div class="modal-dialog vertical-align-center">
      <ng-container *ngIf="createdOrganization && !isError; else failToCreate">
        <div class="modal-content">
          <!-- header -->
          <div class="modal-header">
            <!-- 닫기(x) 버튼 -->
            <button type="button" class="close" data-dismiss="modal">×</button>
            <!-- header title -->
            <h4 class="modal-title">조직 생성 완료</h4>
          </div>
          <!-- body -->
          <div class="modal-body">
            <div class="">
              <p class="account_modal_p">
                <span *ngIf="createdOrganization.name !== '(name_dummy)'">{{createdOrganization.name}} </span>조직 생성을 완료했습니다.<br/>
                이동 버튼을 누르면 조직관리로 이동합니다.
              </p>
            </div>
          </div>
          <!-- Footer -->
          <div class="modal-footer">
            <button type="button" class="btns2 colors4"
                    data-dismiss="modal" (click)="navigateOrg()">이동
            </button>
            <button type="button" class="btns2 colors5"
                    data-dismiss="modal">취소
            </button>
          </div>
        </div>
      </ng-container>
      <ng-template #failToCreate>
        <div class="modal-content">
          <!-- header -->
          <div class="modal-header">
            <!-- 닫기(x) 버튼 -->
            <button type="button" class="close" data-dismiss="modal">×</button>
            <!-- header title -->
            <h4 class="modal-title">조직 생성 실패</h4>
          </div>
          <!-- body -->
          <div class="modal-body">
            <div class="">
              <p class="account_modal_p">
                <span *ngIf="createdOrganization.name !== '(name_dummy)'">{{createdOrganization.name}} </span>조직 생성에
                실패했습니다.<br/>
                <span class="red">{{errorMessage}}</span>
              </p>
            </div>
          </div>
          <!-- Footer -->
          <div class="modal-footer">
            <button type="button" class="btns2 colors4"
                    data-dismiss="modal" disabled>이동
            </button>
            <button type="button" class="btns2 colors5"
                    data-dismiss="modal">취소
            </button>
          </div>
        </div>
      </ng-template>
    </div>
  </div>
</div>
